:root{
  --bg:#0b1220;--panel:#101b2f;--muted:#96a3c2;--text:#e6f0ff;--primary:#00ddeb;--danger:#ff5f78;--warn:#fbcf64;--line:#1f2a44;--surface:#0f1b31
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;background:radial-gradient(circle at top left, rgba(0,221,235,.08), transparent 45%),var(--bg);
  color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif
}

/* App shell */
.app{
  display:grid;grid-template-columns:260px 1fr;grid-template-rows:56px 1fr;grid-template-areas:"sidebar topbar" "sidebar main";height:100vh
}
.sidebar{grid-area:sidebar;background:var(--panel);border-right:1px solid var(--line);display:flex;flex-direction:column}
.brand{display:flex;align-items:center;gap:10px;padding:14px 16px;border-bottom:1px solid var(--line)}
.brand-logo{width:22px;height:22px;border-radius:50%;background:linear-gradient(180deg,var(--primary),#2c6ee8)}
.brand-title{font-weight:600}
.nav{padding:10px 8px;overflow:auto}
.nav-section{padding:10px 8px 6px;color:var(--muted);font-size:12px;text-transform:uppercase;letter-spacing:.06em}
.nav a{display:flex;align-items:center;gap:10px;color:inherit;text-decoration:none;padding:8px 10px;border-radius:8px}
.nav a:hover{background:rgba(255,255,255,.04)}
.nav a.active{background:rgba(0,221,235,.15);outline:1px solid rgba(0,221,235,.35)}

.topbar{grid-area:topbar;background:rgba(11,18,32,.9);backdrop-filter:blur(10px);border-bottom:1px solid var(--line);display:flex;align-items:center;gap:12px;justify-content:space-between;padding:8px 14px}
.topbar-left{display:flex;align-items:center;gap:12px}
.page-title{font-weight:600}
.search{display:flex;align-items:center;background:var(--surface);border:1px solid var(--line);border-radius:10px;padding:6px 10px;gap:8px;min-width:260px}
.search input{background:transparent;border:none;outline:none;color:var(--text);width:100%}
.icon{width:18px;height:18px;display:inline-block;vertical-align:middle}
.btn{display:inline-flex;align-items:center;gap:8px;background:linear-gradient(145deg, rgba(16,27,49,.95), rgba(24,37,63,.9));border:1px solid var(--line);color:var(--text);padding:8px 12px;border-radius:10px;cursor:pointer}
.btn.primary{border-color:rgba(0,221,235,.4)}
.btn.danger{border-color:rgba(255,95,120,.5)}

.main{grid-area:main;overflow:auto;padding:16px}

/* Table */
.table{width:100%;border-collapse:separate;border-spacing:0 8px}
.table thead th{font-size:12px;color:var(--muted);text-align:left;padding:6px 10px}
.table tbody tr{background:var(--panel);border:1px solid var(--line)}
.table tbody td{padding:10px;border-top:1px solid var(--line);border-bottom:1px solid var(--line)}
.table tbody tr:first-child td{border-top-left-radius:8px;border-top-right-radius:8px}
.table tbody tr:last-child td{border-bottom-left-radius:8px;border-bottom-right-radius:8px}
.sortable{cursor:pointer}
.sortable:hover{text-decoration:underline}
.badge{padding:3px 8px;border-radius:10px;border:1px solid var(--line);font-size:12px}
.badge.ok{background:rgba(0,221,235,.15);border-color:rgba(0,221,235,.35)}
.badge.warn{background:rgba(251,207,100,.18);border-color:rgba(251,207,100,.45)}
.badge.danger{background:rgba(255,95,120,.2);border-color:rgba(255,95,120,.5)}

.table-actions{display:flex;gap:8px}
.pagination{display:flex;align-items:center;gap:8px;margin-top:10px;color:var(--muted)}
.select{background:transparent;border:1px solid var(--line);color:var(--text);padding:4px 8px;border-radius:8px}

/* Dialog */
.dialog-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center}
.dialog{background:var(--panel);border:1px solid var(--line);border-radius:12px;max-width:720px;width:min(92vw,720px);box-shadow:0 12px 40px rgba(0,0,0,.5)}
.dialog-header{display:flex;justify-content:space-between;align-items:center;padding:12px 14px;border-bottom:1px solid var(--line)}
.dialog-body{padding:14px}
.dialog-footer{display:flex;justify-content:flex-end;gap:8px;padding:12px 14px;border-top:1px solid var(--line)}
.field{display:flex;flex-direction:column;gap:6px;margin-bottom:10px}
.field input,.field textarea{background:var(--surface);border:1px solid var(--line);color:var(--text);padding:8px;border-radius:8px}

@media (max-width:900px){
  .app{grid-template-columns:1fr;grid-template-rows:56px 1fr;grid-template-areas:"topbar" "main"}
  .sidebar{display:none}
}

/* Incubator view */
.incubator-meta{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;margin-bottom:18px}
.meta-card{background:var(--panel);border:1px solid var(--line);border-radius:12px;padding:12px}
.meta-card .meta-label{font-size:11px;text-transform:uppercase;letter-spacing:.06em;color:var(--muted);margin-bottom:4px}
.meta-card .meta-value{font-size:16px;font-weight:600}

.incubator-grid{display:grid;grid-template-columns:repeat(6,minmax(120px,1fr));gap:12px}
.incubator-slot{background:linear-gradient(145deg,rgba(16,27,49,.95),rgba(24,37,63,.9));border:1px solid var(--line);border-radius:14px;padding:12px;display:flex;flex-direction:column;gap:6px;text-align:left;color:inherit;cursor:pointer;transition:border-color .18s ease,transform .18s ease,box-shadow .18s ease}
.incubator-slot:hover{transform:translateY(-4px);border-color:rgba(0,221,235,.35);box-shadow:0 18px 40px rgba(0,0,0,.35)}
.incubator-slot.empty{opacity:.55;border-style:dashed;cursor:default;transform:none;box-shadow:none}
.incubator-slot.empty:hover{transform:none;border-color:var(--line)}
.incubator-slot.pending{border-style:dashed;border-color:rgba(251,207,100,.5)}
.incubator-slot.warning{border-color:rgba(251,207,100,.5)}
.incubator-slot.alert{border-color:rgba(255,95,120,.6)}
.slot-header{display:flex;justify-content:space-between;align-items:center;font-size:13px;font-weight:600}
.slot-body{font-size:12px;display:flex;flex-direction:column;gap:3px;color:var(--muted)}
.slot-body span{color:var(--text)}
.slot-footer{font-size:11px;color:var(--muted);margin-top:auto}
.slot-badge{padding:2px 6px;border-radius:8px;background:rgba(0,221,235,.15);border:1px solid rgba(0,221,235,.25);font-size:10px;letter-spacing:.05em;text-transform:uppercase}
.slot-summary{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:10px;margin-bottom:14px}
.slot-summary .label{font-size:11px;color:var(--muted);text-transform:uppercase;letter-spacing:.05em}
.slot-summary .value{font-size:15px;font-weight:600}
.slot-timeline{list-style:none;padding:0;margin:12px 0 0;display:flex;flex-direction:column;gap:8px;font-size:13px}
.slot-timeline li{display:flex;justify-content:space-between;gap:16px;border-bottom:1px solid rgba(255,255,255,.06);padding-bottom:6px}
.slot-timeline span:first-child{color:var(--muted)}
.slot-batches{margin-top:12px;border:1px solid var(--line);border-radius:10px;overflow:hidden}
.slot-batches table{width:100%;border-collapse:collapse;font-size:13px}
.slot-batches th,.slot-batches td{padding:8px 10px;border-bottom:1px solid var(--line)}
.slot-batches th{background:rgba(255,255,255,.04);color:var(--muted);text-transform:uppercase;font-size:11px;letter-spacing:.05em;text-align:left}

@media (max-width:1100px){
  .incubator-grid{grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}
}

/* Hatcher transfer */
.trolley-meta{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin-bottom:18px}
.trolley-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px;max-height:65vh;overflow-y:auto;padding-right:10px}
.trolley-card{background:linear-gradient(145deg,rgba(16,27,49,.94),rgba(24,37,63,.9));border:2px solid var(--line);border-radius:16px;padding:16px;display:flex;flex-direction:column;gap:10px;color:inherit;text-align:left;cursor:pointer;transition:transform .18s ease,border-color .18s ease,box-shadow .18s ease}
.trolley-card:hover{transform:translateY(-4px);box-shadow:0 18px 40px rgba(0,0,0,.35)}
.trolley-card.good{border-color:rgba(62,214,142,.7)}
.trolley-card.warn{border-color:rgba(251,207,100,.65)}
.trolley-card.bad{border-color:rgba(255,95,120,.75)}
.trolley-header{display:flex;justify-content:space-between;align-items:center}
.trolley-header h3{margin:0;font-size:18px}
.trolley-header span{font-size:12px;color:var(--muted)}
.trolley-body{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:6px 12px;font-size:13px}
.trolley-body div{display:flex;flex-direction:column}
.trolley-body .label{color:var(--muted);font-size:11px;text-transform:uppercase;letter-spacing:.05em}
.trolley-body .value{font-weight:600}
.trolley-footer{display:flex;justify-content:space-between;font-size:12px;color:var(--muted)}
.trolley-badges{display:flex;gap:6px;flex-wrap:wrap}
.trolley-badge{padding:4px 8px;border-radius:999px;background:rgba(0,221,235,.12);border:1px solid rgba(0,221,235,.3);font-size:11px;text-transform:uppercase;letter-spacing:.05em}
.pill{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;font-size:11px;text-transform:uppercase;letter-spacing:.05em;background:rgba(0,0,0,.15);border:1px solid rgba(255,255,255,.08)}
.pill.warn{background:rgba(251,207,100,.18);border-color:rgba(251,207,100,.45);color:var(--warn)}
.delta-good{color:#5df0b1}
.delta-warn{color:#fbcf64}
.delta-bad{color:#ff5f78}
.vacc-table{margin-top:14px;border:1px solid var(--line);border-radius:12px;overflow:hidden}
.vacc-table table{width:100%;border-collapse:collapse;font-size:13px}
.vacc-table th,.vacc-table td{padding:8px 10px;border-bottom:1px solid var(--line)}
.vacc-table th{background:rgba(255,255,255,.04);color:var(--muted);text-transform:uppercase;font-size:11px;letter-spacing:.05em;text-align:left}
.trolley-card.pending{border-color:rgba(150,163,194,.4);opacity:.85}
.trolley-card.available{border-color:rgba(150,163,194,.25);border-style:dashed;color:var(--muted);cursor:default}
.trolley-card.available:hover{transform:none;box-shadow:none}
.filter-bar{display:flex;gap:12px;align-items:flex-end;margin-bottom:12px;flex-wrap:wrap}
.filter-bar label{display:flex;flex-direction:column;font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:.05em}
.filter-bar input{background:var(--surface);border:1px solid var(--line);color:var(--text);padding:6px 8px;border-radius:8px}
.filter-bar button{background:linear-gradient(145deg, rgba(16,27,49,.95), rgba(24,37,63,.9));border:1px solid var(--line);color:var(--text);padding:6px 12px;border-radius:8px;cursor:pointer}
.filter-bar button:hover{border-color:rgba(0,221,235,.4)}
.filter-bar select{background:var(--surface);border:1px solid var(--line);color:var(--text);padding:6px 8px;border-radius:8px}
.chip-list{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
.chip{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;border:1px solid rgba(0,221,235,.35);background:rgba(0,221,235,.12);font-size:11px;text-transform:uppercase;letter-spacing:.05em}
.chip button{background:none;border:none;color:var(--text);cursor:pointer;font-size:11px;padding:0}
.link-button{background:none;border:none;color:rgba(0,221,235,.85);cursor:pointer;padding:0;font-size:13px}
.link-button:hover{text-decoration:underline}
.pulling-table{width:100%;border-collapse:collapse;margin-top:16px}
.pulling-table th,.pulling-table td{padding:10px;border:1px solid var(--line);text-align:left;font-size:13px}
.pulling-table th{background:rgba(255,255,255,.04);text-transform:uppercase;font-size:11px;letter-spacing:.05em;color:var(--muted)}
.pulling-meta{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin-bottom:18px}
